<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="shortcut icon" type="image/x-icon" href="favicon.png">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="http://localhost:3000/styles.css">
	<title>Assignment 3</title>
</head>

<body>
	<header>
		<h1>UltraChat Online</h1>
	</header>

	<div class='app-body'>

		<div class='messages'>
			<h3 class='section-title'>Messages</h3>
			<ul id='messages'></ul>
		</div>

		<div class='user-list'>
			<h3 class='section-title'>User List</h3>
			<ul id='users'>
				<li>user1</li>
				<li>user2</li>
			</ul>
		</div>

		<form>
			<input id="m" autocomplete="off" />
			<button>Send</button>
		</form>
	</div>

	<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>
	$(function() {
		var socket = io();

		var element = document.getElementById("messages");
		element.scrollTop = element.scrollHeight;

		$('form').submit(function(e) {
			e.preventDefault();

			if ($('#m').val() != '') {
				socket.emit('message', $('#m').val());
			}

			$('#m').val('');
			return false;
		});

		socket.on('join', function(msg) {
			$('#messages').append($('<li>').text(msg));

			var element = document.getElementById("messages");
			element.scrollTop = element.scrollHeight;
		});

		socket.on('dc', function(msg) {
			$('#messages').append($('<li>').text(msg));

			var element = document.getElementById("messages");
			element.scrollTop = element.scrollHeight;
		});

		socket.on('message', function(msg) {
			$('#messages').append($('<li>').text(msg));

			var element = document.getElementById("messages");
			element.scrollTop = element.scrollHeight;
		});
	});

	</script>

</body>

</html>
